
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3. Командная строка &#8212; Командная оболочка UNIX</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'src/cli';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Утилита less" href="less.html" />
    <link rel="prev" title="2. Терминал" href="terminal.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Командная оболочка UNIX - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Командная оболочка UNIX - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Введение
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="setup.html">1. Подготовка рабочего окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminal.html">2. Терминал</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">3. Командная строка</a></li>
<li class="toctree-l1"><a class="reference internal" href="less.html">4. Утилита less</a></li>
<li class="toctree-l1"><a class="reference internal" href="man.html">5. Справочная система man</a></li>
<li class="toctree-l1"><a class="reference internal" href="fs.html">6. Работа с файлами</a></li>
<li class="toctree-l1"><a class="reference internal" href="env.html">7. Переменные окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">8. Стандартные потоки</a></li>
<li class="toctree-l1"><a class="reference internal" href="archive.html">9. Архивирование файлов</a></li>
<li class="toctree-l1"><a class="reference internal" href="vim.html">10. Редактирование в vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">11. Управление заданиями</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">12. Сценарии bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">13. Двоичная программа на Си</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmux.html">14. Терминальный мультиплексор</a></li>
<li class="toctree-l1"><a class="reference internal" href="getopt.html">15. Разбор аргументов программы</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile.html">16. Компиляция программы на Си</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">17. Поиск файлов и в файлах</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">18. Проверочная работа</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/wolodyx/unixshell" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/wolodyx/unixshell/issues/new?title=Issue%20on%20page%20%2Fsrc/cli.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/src/cli.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Командная строка</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Формат командной строки</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Управление строкой ввода</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Вопросы для контроля</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Упражнения</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><span class="section-number">3. </span>Командная строка<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<!-- Важность навыка работы в командной строке -->
<p>Умение работать в командной строке – важнейший навык, которым должен обладать каждый разработчик программ.
В среде Windows он маловостребован, так как в ней классические консольные утилиты облачены в графический интерфейс.
Но в среде UNIX без командной строки не обойтись.
Она участвует в автоматизации рутинных действий и решении специфический задач.</p>
<!-- Где используют командную строку -->
<p>Командная строка – это основной инструмент при администрировании ОС и сети.
Но вам, как разработчикам ПО, она понадобится при</p>
<ul class="simple">
<li><p>установке дополнительных программ;</p></li>
<li><p>настройке окружения разработки;</p></li>
<li><p>сборке программ из исходных кодов;</p></li>
<li><p>автоматизации рутинных действий.</p></li>
</ul>
<!-- Что узнаем? -->
<p>В результате обучения вы:</p>
<ul class="simple">
<li><p>разберете формат командной строки;</p></li>
<li><p>разберете возможности эмулятора терминала <code class="docutils literal notranslate"><span class="pre">GNOME</span> <span class="pre">Terminal</span></code>;</p></li>
<li><p>научитесь эффективно редактировать строки в терминале.</p></li>
</ul>
<section id="id2">
<h2>Формат командной строки<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>Командная строка делится на <em>аргументы командной строки</em>, которые разделены пробельными символами (пробелом или табуляцией).
Первый аргумент присутствует всегда и представляет имя команды.
Остальные аргументы называются <em>аргументами команды</em> и передаются ей для разбора.
Они могут включать имена файловых объектов, идентификатор процесса, символьную строку.
Если аргумент содержит пробельный символ, который может разбить его на две части, то он заключается в кавычки.
Аргументы команды могут отсутствовать, тогда используются в зависимости от команды значения по умолчанию.</p>
<!-- Пример с командой ls -->
<p>Команда <code class="docutils literal notranslate"><span class="pre">ls</span></code>, запущенная без аргументов, перечисляет имена файлов и каталогов в текущем каталоге.
Если передать ей путь к каталогу, то она отобразит содержимое этого каталога:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>woldemar@skt:~$<span class="w"> </span>ls<span class="w"> </span>snap/
firefox<span class="w">  </span>snapd-desktop-integration<span class="w">  </span>snap-store
</pre></div>
</div>
<p>Если мы хотим посмотреть содержимое каталога “Рабочий стол”, то его имя следует передать в кавычках, иначе это будет расценено как два пути:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>woldemar@skt:~$<span class="w"> </span>ls<span class="w"> </span>Рабочий<span class="w"> </span>стол
ls:<span class="w"> </span>невозможно<span class="w"> </span>получить<span class="w"> </span>доступ<span class="w"> </span>к<span class="w"> </span><span class="s1">&#39;Рабочий&#39;</span>:<span class="w"> </span>Нет<span class="w"> </span>такого<span class="w"> </span>файла<span class="w"> </span>или<span class="w"> </span>каталога
ls:<span class="w"> </span>невозможно<span class="w"> </span>получить<span class="w"> </span>доступ<span class="w"> </span>к<span class="w"> </span><span class="s1">&#39;стол&#39;</span>:<span class="w"> </span>Нет<span class="w"> </span>такого<span class="w"> </span>файла<span class="w"> </span>или<span class="w"> </span>каталога
</pre></div>
</div>
<!-- Опции -->
<p>Аргументы команды, начинающиеся с дефиса, называются <em>опциями</em>.
Они настраивают поведение команды: меняют формат вывода, переключают на другой режим работы.
Опции бывают короткими и длинными.
В названии короткой опции только один символ.
У длинных опций названия более подробные и предваряются уже двумя дефисами.
Одна и та же опция может иметь как короткое, так и длинное название.
Например, часто образуют пары опции:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span></code> и <code class="docutils literal notranslate"><span class="pre">--version</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-h</span></code> и <code class="docutils literal notranslate"><span class="pre">--help</span></code>;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-a</span></code> и <code class="docutils literal notranslate"><span class="pre">--all</span></code>.</p></li>
</ul>
<!-- Объединение коротких опций -->
<p>Несколько коротких опций можно объедить, перечислив их однобуквенные обозначения после дефиса.
Опция <code class="docutils literal notranslate"><span class="pre">-a</span></code> в команде <code class="docutils literal notranslate"><span class="pre">ls</span></code> показывает скрытые объекты (имена которых начинается с символа точки), а опция <code class="docutils literal notranslate"><span class="pre">-l</span></code> выводит подробную информацию по каждому объекту.
Командная строка <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-a</span> <span class="pre">-l</span></code> идентична строке <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-al</span></code> и выводит на экран подробную информацию о файловых объектах, включая скрытые, в текущем каталоге.
Короткая опция <code class="docutils literal notranslate"><span class="pre">-a</span></code> можно заменить на длинную <code class="docutils literal notranslate"><span class="pre">--all</span></code>, тогда строка стала бы как <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">--all</span> <span class="pre">-l</span></code> и исполнила те же самые действия.</p>
<!-- Опции с аргументами -->
<p>Обычная опция представляет булевый аргумент и предлагает выбор из двух вариантов.
Также существуют опции с аргументами, которые можно сравнить с именованными параметрами в Python.
Опция от аргумента отделяется символом <code class="docutils literal notranslate"><span class="pre">=</span></code>.
Значения возможных аргументов может быть любым или выбранным из списка.
Именованная опция <code class="docutils literal notranslate"><span class="pre">--sort=WORD</span></code> команды <code class="docutils literal notranslate"><span class="pre">ls</span></code> указывает критерий сортировки файлов.
Аргумент <code class="docutils literal notranslate"><span class="pre">WORD</span></code> может быть выбран из списка <code class="docutils literal notranslate"><span class="pre">none</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">extension</span></code>.
Команда <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">--sort=size</span></code> отсортирует файлы в текущем каталоге по размеру.</p>
<!-- Последовательность аргументов -->
<p>Принято после имени команды перечислять опции и только потом остальные аргументы.
Следующая команда выведет содержимое каталога <code class="docutils literal notranslate"><span class="pre">work</span></code>, отсортированного по размеру (опция <code class="docutils literal notranslate"><span class="pre">--sort=size</span></code>) и указанием размера занимаемого места на диске (опция <code class="docutils literal notranslate"><span class="pre">-s</span></code>):
<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-s</span> <span class="pre">--sort=size</span> <span class="pre">work</span></code></p>
</section>
<section id="id3">
<h2>Управление строкой ввода<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<!-- Введение -->
<!-- Системный редактор текстовой строки -->
<p>Система UNIX при работе с терминалом предлагает минималистичный редактор строки.
Поэтому пользовательские программы не реализуют собственный ввод и редактирование данных, что упрощает их код.</p>
<!-- Ограниченные возможности системного редактора -->
<p>У системного редактора отсутствует управляемый курсор.
Курсор всегда привязан к концу редактируемой строки, поэтому добавление и удаление символов происходит только с конца.
Команды удаления, перемещающие курсор назад, могут затереть символ, слово или строку.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&gt; command arg1 arg2_
  ┬           ┬   ┬│ Удаляет последние:
  │           │   └┤ `ctrl-?` символ
  │           └────┤ `ctrl-w` слово
  └────────────────┘ `ctrl-u` строку
</pre></div>
</div>
<p>По современным меркам вышеперечисленных команд недостаточно для полноценного редактирования.
В редакторе не хватает управления курсором, поддержки функциональных клавиш, истории команд, автодополнения.
Расширение системного редактора новыми функциональными возможностями выглядело бы абсурдно.
Его программный код размещается на стороне ядра ОС.
Это усложняет расширение и поддержку кода.
Функциональные возможности часто связаны с предпочтениями пользователя.
Пользователь хотел бы иметь выбор, а встроенный в ОС редактор этого не позволяет.
По этим причинам редактирование строки реализовано в интерпретаторе командной строки.</p>
<p>Интерпретатор <code class="docutils literal notranslate"><span class="pre">bash</span></code> предлагает свой редактор строки, основанный на библиотеке <code class="docutils literal notranslate"><span class="pre">GNU</span> <span class="pre">Readline</span></code>.
Если запустить <code class="docutils literal notranslate"><span class="pre">bash</span></code> с опцией <code class="docutils literal notranslate"><span class="pre">--noediting</span></code>, то он откажется от собственного редактора в пользу системного.
Это можно увидеть, если воспользоваться клавишами управления курсором.
Они теряют свои функции и генерируют символы <code class="docutils literal notranslate"><span class="pre">^[[A</span></code>, <code class="docutils literal notranslate"><span class="pre">^[[B</span></code>, <code class="docutils literal notranslate"><span class="pre">^[[C</span></code>, <code class="docutils literal notranslate"><span class="pre">^[[D</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">bash</span></code> предлагает собственный редактор только для набора командной строки.
Если запустить утилиту, которая потребует данные от пользователя, то вступает в работу системный редактор.
Попробуйте запустить утилиту <code class="docutils literal notranslate"><span class="pre">sort</span></code>, которая по умолчанию сотртируемые записи, введенные из терминала.
Нажатие на <code class="docutils literal notranslate"><span class="pre">Enter</span></code> указывает на конец записи, а окончание ввода данных сигналиризуертся по <code class="docutils literal notranslate"><span class="pre">ctrl-d</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>woldemar@skt:~$ sort
огурец    &lt;Enter&gt;
банан     &lt;Enter&gt;
перец     &lt;Enter&gt;
помидор   &lt;ctrl-d&gt;
банан
огурец
перец
помидор
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bash</span></code> для редактирования строки использует комбинации клавиш, свойственные редактору <code class="docutils literal notranslate"><span class="pre">emacs</span></code>.
Пройдемся по следующим возможностям встроенного редактора <code class="docutils literal notranslate"><span class="pre">bash</span></code>:</p>
<ul class="simple">
<li><p>работу с историей команд;</p></li>
<li><p>автодополнение;</p></li>
<li><p>перемещение курсора по строке;</p></li>
<li><p>удаление символов в строке;</p></li>
<li><p>отмена изменений;</p></li>
<li><p>вставка текста из буфера.</p></li>
</ul>
<!-- Поиск строки в истории команд -->
<p>Выше упоминали встроенную команду <code class="docutils literal notranslate"><span class="pre">history</span></code>, которая выводит на экран список исполненных команд.
История команд каждого пользователя хранится в его домашнем каталоге в файле <code class="docutils literal notranslate"><span class="pre">.bash_history</span></code>.
Выбор предыдущей команды из истории клавишей «↓» (дублируется <code class="docutils literal notranslate"><span class="pre">ctrl-p</span></code>), а на следующу – «↑» (<code class="docutils literal notranslate"><span class="pre">ctrl-n</span></code>).
Если команда расположена далеко, то ее можно найти поиском (инкрементальным и реверсивным).
Поиск активируется по <code class="docutils literal notranslate"><span class="pre">ctrl-r</span></code> и последующий набор текста приведет к выводу строки, в которой присутствует набранный текст.
Выход из поиска с последующим выбором активной строки происходит по нажатию на клавишу <code class="docutils literal notranslate"><span class="pre">ESC</span></code>.</p>
<figure class="align-default">
<img alt="../_images/bash-history-prev-next.png" src="../_images/bash-history-prev-next.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Если запущенная командная строка начинается с пробела, то она не сохраняется в истории!</p>
</div>
<!-- Автодополнение -->
<p>При вводе в терминал команд и их параметров легко ошибиться.
Найти ошибку не всегда просто.
В этом случае помогает автодополнение.
Пользователь вводит начальные символы данных, а система по просьбе введет оставшиеся символы или предложит на выбор возможные варианты.
Это работает для названий команд, файлов и каталогов.
Текст дополняется, если однозначно, по клавише <code class="docutils literal notranslate"><span class="pre">tab</span></code>.
Если есть несколько вариантов дополнения, то двойное нажатие по <code class="docutils literal notranslate"><span class="pre">tab</span></code> предложит все возможные варианты.</p>
<!-- Перемещение курсора -->
<p>В редакторе строки от <code class="docutils literal notranslate"><span class="pre">Readline</span></code> присутствует курсор, который можно перемещать вперед и назад.
Перемещения курсора складываются из направления движения (вперед и назад) и дистанцию (на символ, слово и строку):</p>
<ul class="simple">
<li><p>на один символ вперед и назад (<code class="docutils literal notranslate"><span class="pre">ctrl-f</span></code>/<code class="docutils literal notranslate"><span class="pre">ctrl-b</span></code>);</p></li>
<li><p>на одно слово вперед и назад (<code class="docutils literal notranslate"><span class="pre">alt-f</span></code>/<code class="docutils literal notranslate"><span class="pre">alt-b</span></code>);</p></li>
<li><p>в начало и конец строки (<code class="docutils literal notranslate"><span class="pre">ctrl-a</span></code>/<code class="docutils literal notranslate"><span class="pre">ctrl-e</span></code>).</p></li>
</ul>
<figure class="align-default">
<img alt="../_images/bash-cursor-move.png" src="../_images/bash-cursor-move.png" />
</figure>
<p>Горячие клавиши отложатся в памяти быстрее, если знать, что <code class="docutils literal notranslate"><span class="pre">f</span></code> образован от слова <code class="docutils literal notranslate"><span class="pre">forward</span></code> (вперед), а <code class="docutils literal notranslate"><span class="pre">b</span></code> – <code class="docutils literal notranslate"><span class="pre">back</span></code> (назад).</p>
<!-- Отмена изменений -->
<p>Прежде чем перейти к удалению и вставке, научимся отменять изменения.
Это понадобится, чтобы вернуть в исходное состояние строку для упражнений без его повторного набора.
Известная всем команда <code class="docutils literal notranslate"><span class="pre">ctrl-z</span></code> в <code class="docutils literal notranslate"><span class="pre">emacs</span></code> имеет вид <code class="docutils literal notranslate"><span class="pre">ctrl-_</span></code> или <code class="docutils literal notranslate"><span class="pre">ctrl-x</span> <span class="pre">ctrl-u</span></code>.</p>
<!-- Удаление текста -->
<p>Для удаления используют следующие горячие клавиши:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl-d</span></code> – символа под курсором (аналог клавиши <code class="docutils literal notranslate"><span class="pre">del</span></code>);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl-k</span></code> – от начала курсора до конца строки;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl-u</span></code> – от начала курсора до начала строки;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt-d</span></code>  – от начала курсора до конца слова;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alt-backspace</span></code> – от курсора до начала слова;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl-w</span></code> – от курсора до предыдущего пробела.</p></li>
</ul>
<p>Команда <code class="docutils literal notranslate"><span class="pre">ctrl-w</span></code> полезна для удаления ровно одного аргумента в строке.
Команда <code class="docutils literal notranslate"><span class="pre">ctrl-u</span></code> позволяет быстро очистить командную строку, чем если пробовать это через <code class="docutils literal notranslate"><span class="pre">Backspace</span></code>.</p>
<figure class="align-default">
<img alt="../_images/bash-remove-cmdline.png" src="../_images/bash-remove-cmdline.png" />
</figure>
<!-- Вставка текста -->
<p>Удаляемый текст помещается в буфер.
Предыдущий текст при этом не перезатирается, а сдвигается ниже, т.е. буфер многоуровневый.
Команда <code class="docutils literal notranslate"><span class="pre">ctrl-y</span></code> вставляет текст из вершины буфера.
Если нужно вставить текст из другой ячейки буфера, то его прокручивают командой <code class="docutils literal notranslate"><span class="pre">alt-y</span></code>.
Направление прокрутки меняют на противоположную командой <code class="docutils literal notranslate"><span class="pre">alt--</span></code> (знак-аргумент), а число прокрутки <code class="docutils literal notranslate"><span class="pre">alt-number</span></code> (число-аргумент).
Работа с многоуровневым буфером заставляет пользователя помнить занесенные туда текстовые фрагменты и их позиции.
Это не делает популярной команду вставки.
На практике вместо вставки заново набирают строку или используют следующий трюк.
Перед длинной командой добавляют символ решетки <code class="docutils literal notranslate"><span class="pre">#</span></code> и нажимают <code class="docutils literal notranslate"><span class="pre">Enter</span></code>.
Такая команда не исполнится, но сохранится в истории, откуда ее можно быстро выбрать и отредактировать.</p>
 <!--
* Alt + T
* Alt + .
 -->
<!-- Заключение раздела -->
<p>Перечисленные выше команды совпадают с принятыми в текстовом редакторе <code class="docutils literal notranslate"><span class="pre">emacs</span></code>.
Полный список команд вы можете найти по ссылке <a class="reference external" href="https://catonmat.net/ftp/readline-emacs-editing-mode-cheat-sheet.txt">“Emacs Editing Mode Cheat Sheet”</a>.
Существует и альтернативные команды в стиле <code class="docutils literal notranslate"><span class="pre">vi</span></code>.
Переключение между ними происходит по встроенной команде <code class="docutils literal notranslate"><span class="pre">set</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>emacs
<span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>vi
</pre></div>
</div>
</section>
<section id="id4">
<h2>Вопросы для контроля<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>В каких случаях вам понадобится умение работать в командной строке?</p></li>
<li><p>Расскажите про формат командной строки.</p></li>
<li><p>Чем отличаются редакторы строки: системный и встроенный в <code class="docutils literal notranslate"><span class="pre">bash</span></code>?</p></li>
<li><p>Как использовать с пользой историю команд?</p></li>
<li><p>Что такое автодополнение? Продемонстрируйте на примере.</p></li>
<li><p>Как можно быстро перемещать курсор по редактируемой командной строке?</p></li>
<li><p>Перечислите не менее двух команд по удалению символов строки в <code class="docutils literal notranslate"><span class="pre">bash</span></code>.</p></li>
<li><p>Как работает вставка при редактировании командной строки?</p></li>
<li><p>Как отменить последнее изменение строки?</p></li>
<li><p>Чем отличаются команды <code class="docutils literal notranslate"><span class="pre">alt-backspace</span></code> и <code class="docutils literal notranslate"><span class="pre">ctrl-w</span></code>?
В каких случаях они применяются?</p></li>
<li><p>Как исключить попадание выполненной команды в историю?</p></li>
</ol>
</section>
<section id="id5">
<h2>Упражнения<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<ol class="arabic">
<li><p>Исправьте строку <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">docker</span> <span class="pre">run</span> <span class="pre">sppo</span> <span class="pre">--volume</span> <span class="pre">$(pwd):/book</span> <span class="pre">--rm</span></code>, переместив аргумент <code class="docutils literal notranslate"><span class="pre">sppo</span></code> в конец.
В начальной позиции курсор расположен в конце строки.
Постарайтесь воспользоваться как можно меньшим количеством команд для этого.</p></li>
<li><p>В следующей командной строке поменяйте свободные аргументы местами: <!-- https://unix.stackexchange.com/questions/187600/how-do-i-swap-the-two-last-command-line-arguments --></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diff</span> <span class="o">-</span><span class="n">u</span> <span class="n">myproject</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">file</span><span class="o">.</span><span class="n">cpp</span> <span class="o">~/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">file_from_ivanov</span><span class="o">.</span><span class="n">cpp</span>
</pre></div>
</div>
<p>Постарайтесь воспользоваться как можно меньшим количеством команд для этого.</p>
</li>
<li><p>В следующей командной строке поменяйте опции местами:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">x</span> <span class="o">~/</span><span class="n">myproject</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">archive</span><span class="o">.</span><span class="n">tar</span>
</pre></div>
</div>
<p>Постарайтесь воспользоваться как можно меньшим количеством команд для этого.</p>
</li>
<li><p>Попробуйте разобраться, что делает каждая из опций в команде <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-l</span> <span class="pre">--sort=size</span> <span class="pre">--reverse</span></code>?</p></li>
<li><p>С помощью автодополнения покажите все команды, начинающиеся с символов <code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>, … <code class="docutils literal notranslate"><span class="pre">z</span></code>.</p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./src"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="terminal.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2. </span>Терминал</p>
      </div>
    </a>
    <a class="right-next"
       href="less.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>Утилита less</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Формат командной строки</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Управление строкой ввода</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Вопросы для контроля</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Упражнения</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Лазарев Владимир
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>