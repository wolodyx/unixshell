
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>10. Редактирование в vim &#8212; Командная оболочка UNIX</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'src/vim';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11. Управление заданиями" href="jobs.html" />
    <link rel="prev" title="9. Архивирование файлов" href="archive.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Командная оболочка UNIX - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Командная оболочка UNIX - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Введение
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="setup.html">1. Подготовка рабочего окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminal.html">2. Терминал</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">3. Командная строка</a></li>
<li class="toctree-l1"><a class="reference internal" href="less.html">4. Утилита less</a></li>
<li class="toctree-l1"><a class="reference internal" href="man.html">5. Справочная система man</a></li>
<li class="toctree-l1"><a class="reference internal" href="fs.html">6. Работа с файлами</a></li>
<li class="toctree-l1"><a class="reference internal" href="env.html">7. Переменные окружения</a></li>
<li class="toctree-l1"><a class="reference internal" href="streams.html">8. Стандартные потоки</a></li>
<li class="toctree-l1"><a class="reference internal" href="archive.html">9. Архивирование файлов</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">10. Редактирование в vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">11. Управление заданиями</a></li>
<li class="toctree-l1"><a class="reference internal" href="script.html">12. Сценарии bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">13. Двоичная программа на Си</a></li>
<li class="toctree-l1"><a class="reference internal" href="tmux.html">14. Терминальный мультиплексор</a></li>
<li class="toctree-l1"><a class="reference internal" href="getopt.html">15. Разбор аргументов программы</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile.html">16. Компиляция программы на Си</a></li>
<li class="toctree-l1"><a class="reference internal" href="search.html">17. Поиск файлов и в файлах</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">18. Проверочная работа</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/wolodyx/unixshell" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/wolodyx/unixshell/issues/new?title=Issue%20on%20page%20%2Fsrc/vim.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/src/vim.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Редактирование в vim</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Введение</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Начальные навыки</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Режимы и команды</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Перемещение курсора</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Редактирование текста</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Вопросы для самоконтроля</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="vim">
<h1><span class="section-number">10. </span>Редактирование в vim<a class="headerlink" href="#vim" title="Link to this heading">#</a></h1>
<section id="id1">
<h2>Введение<a class="headerlink" href="#id1" title="Link to this heading">#</a></h2>
<p>Редактирование текстового файла усложняется тем, что текстовый терминал и интерактивные программы в основном не поддерживают работу с мышью.
Такое положение дел не ограничивает пользователя в действиях, но добавляет ему дополнительной темы для изучения.
Ситуация усложняется еще тем, что вместо привычного 𝑛𝑎𝑛𝑜 мы используем нестандартный текстовый редактор 𝑣𝑖𝑚.
Сложность обучения сегодня компенсируются завтра умением быстро редактировать текст, что является важным навыком для разработчика.</p>
<p>Vim не входит в состав предустановленных программ на большинстве дистрибутивов Linux.
Система Ubuntu в этом не исключение.
Поэтому, если vim отсутствует и у вас нет полномочий суперпользователя на установку, то воспользуйтесь предустановленной утилитой 𝑣𝑖 развитием которой является 𝑣𝑖𝑚.
На нашем уровне использования между ними нет различий.</p>
<p>Для редактирования файла с именем “имя_файла” выполните команду <code class="docutils literal notranslate"><span class="pre">vim</span> <span class="pre">имя_файла</span></code>.
Если файла с таким именем существует, то он отобразится в программе, если нет, то отобразится пустой файл, который появится на диске при первом сохранении изменений.</p>
<p>Vim может работать в одном из нескольких режимов.
В зависимости от того, в каком она режиме, нажатия на кнопки интерпретируются по-разному.
В начальный момент vim находится в режиме команд.
Это значит, что вводимые пользователем символы будут интерпретироваться как команды, а не как набираемый текст.
Выход из утилиты произойдет по команде <code class="docutils literal notranslate"><span class="pre">:q</span></code>, если в файле нет несохраненных изменений.
Чтобы выйти из файла без сохранения изменений используйте команду <code class="docutils literal notranslate"><span class="pre">:q!</span></code>.
Сохранение изменений файла на диск используйте команду <code class="docutils literal notranslate"><span class="pre">:w</span></code>.
Во всех трех командах первым символом является двоеточие, которое активирует режим командной строки.
В этом режиме команда на выполнение запускается клавишей “Enter”.</p>
<p>Переход из режима команды в режим ввода текста происходит по команде <code class="docutils literal notranslate"><span class="pre">i</span></code> (от “insert”).
Обратный переход произойдет по клавише <code class="docutils literal notranslate"><span class="pre">ESC</span></code> или <code class="docutils literal notranslate"><span class="pre">Ctrl+[</span></code>.
Последняя комбинация клавиш подходит, если вы не хотите сбить расстановку пальцев на клавиатуре.</p>
<p>Пяти рассмотренных команд достаточно, чтобы более-менее сносно редактировать текст в <code class="docutils literal notranslate"><span class="pre">vim</span></code>.
Дополнительная информация будет предоставлена в разделе “Текстовый редактор vim”</p>
<p>Программисты и научные сотрудники относятся к категории работников умственного труда.
Большую часть времени они проводят за обдумыванием и переносом мыслей на компьютер.
Для фиксации мыслей используются редакторы – текстовые, офисные, исходного кода.
Чтобы не прервать поток мыслей необходимы удобные инструменты, которые выполняют свои функции и незаметны для пользователя.</p>
<p>Умение печатать десятью пальцами руки позволяет набирать текст со скоростью 500 символов в минуту и выше.
При этом кисти рук возвышаются над клавиатурой так, что указательные пальцы расположены над клавишами <code class="docutils literal notranslate"><span class="pre">A</span></code> и <code class="docutils literal notranslate"><span class="pre">O</span></code>.
Это позиция сбивается при обращении к мыши, использовании функциональных и позиционирующих клавиш.
На восстановление позиции тратится несколько секунд.</p>
<p>Текстовый редактор vim позволяет работать с текстом, используя только небольшое количество управляющих клавиш, до которых дотягиваются мизинчики без нарушения позиции кисти над клавиатурой.
Вследствие необычного интерфейса, который несвойственен графическим редакторам, vim пугает начинающих пользователей.
Здесь нет указателя мыши, вкладок, главного меню, диалоговых окон, панели инструментов.
Для начала работы с ним необходима основательная подготовка, чем мы и займемся в этом разделе.</p>
<p>Альтернативой <code class="docutils literal notranslate"><span class="pre">vim</span></code> являются <code class="docutils literal notranslate"><span class="pre">nano</span></code> и <code class="docutils literal notranslate"><span class="pre">emacs</span></code>.
Простой текстовый редактор <code class="docutils literal notranslate"><span class="pre">nano</span></code> включен по умолчанию в большинство дистрибутивов систем UNIX.
Редактор повторяет графический интерфейс приложений в текстовой среде и поддерживает работу с мышью.
По сравнению с <code class="docutils literal notranslate"><span class="pre">less</span></code> и <code class="docutils literal notranslate"><span class="pre">vim</span></code> он привычен пользователям Windows.
Единственный недостаток – это нетипичные горячие клавиши для популярных команд – <code class="docutils literal notranslate"><span class="pre">Ctrl-O</span></code> для сохранения, <code class="docutils literal notranslate"><span class="pre">Ctrl-W</span></code> для поиска, <code class="docutils literal notranslate"><span class="pre">Alt-6</span></code> для копирования.</p>
<p>Тексты чаще редактируют, чем пишут.
Большая часть работы программиста состоит в изучении и редактировании существующих исходных кодов, чем написании новых.
Преимущества <code class="docutils literal notranslate"><span class="pre">vim</span></code> наглядно демонстрируются при редактировании и перемещении по тексту.
Также его команды похожи на зашифрованные в строку алгоритмы.
По этим причинам он получил распространение среди программистов.</p>
<p>С редактором не удобно работать с неанглоязычными текстами.
При этом приходится часто переключаться на английскую раскладку для корректного ввода команд и обратно для ввода текста.
Понимание, что используешь не ту раскладку приходит, когда команды не исполняются, а текст выглядит не так.</p>
<p>“Vim” содержит множество команд и бесчисленное количество их комбинаций.
Выучить их все не только невозможно, но и бессмысленно.
Они осваиваются на практике по мере необходимости.
Здесь рассмотрим наиболее часто используемые команды.
Частое использование редактора на практике доводит до набора команд без сознательного усилия.
Со временем строка команды забывается, но в нужный момент пальцы самостоятельно ее наберут.
Это может показаться неожиданным, но примеры автомобилистов и компьютерных игроков говорят об обратном, где сознание контролирует окружающую обстановку, а пальцы и руки автономны.</p>
</section>
<section id="id2">
<h2>Начальные навыки<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Vim</span></code> – это продвинутый текстовый редактор с неограниченными возможностями.
Vim удобен при частом редактировании англоязычных текстов.
Это обычное дело при написании программ.
Вдобавок, команды редактора похожи на зашифрованные в одну строку алгоритмы.
Поэтому он популярен среди программистов.</p>
<p>Первое, что советуют перед запуском <code class="docutils literal notranslate"><span class="pre">vim</span></code>, научиться выходить из него.
Запустите редактор командой</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vim<span class="w"> </span><span class="o">[</span>файлы<span class="o">]</span>
</pre></div>
</div>
<p>Если имена файлов не переданы, то откроется окно с заставкой.
На заставке показано, как выйти из программы.</p>
<figure class="align-default">
<img alt="../_images/vim.png" src="../_images/vim.png" />
</figure>
</section>
<section id="id3">
<h2>Режимы и команды<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p>Редактор по разному реагирует на нажатия клавиш в зависимости от того, в каком режиме он находится.
Наиболее часто используют четыре режима.</p>
<ul class="simple">
<li><p>нормальный;</p></li>
<li><p>командной строки;</p></li>
<li><p>вставки;</p></li>
<li><p>визуальный.</p></li>
</ul>
<p>После запуска <code class="docutils literal notranslate"><span class="pre">vim</span></code> находится в <em>нормальном режиме</em>.
Нажимаемые в это время клавиши воспринимаются как команды.</p>
<p>Рассмотрим четыре важные команды для редактора:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:q</span></code>  – выход из программы, если нет несохраненных изменений.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:q!</span></code> – выход из программы без сохранения изменений в файле.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:w</span></code>  – запись изменений на диск.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:e</span> <span class="pre">file.txt</span></code> – открытие файла с именем <code class="docutils literal notranslate"><span class="pre">file.txt</span></code>.</p></li>
</ul>
<p>Все четыре команды начинаются с символа <code class="docutils literal notranslate"><span class="pre">:</span></code>, который переводит редактор в <em>режим командной строки</em>.
Вводимая далее команда отображается в нижней части окна и отправляется на выполнение по нажатию <code class="docutils literal notranslate"><span class="pre">Enter</span></code>.</p>
<p>Команды могут объединяться, образуя одну составную: <code class="docutils literal notranslate"><span class="pre">:wq</span></code> выходит из редактора предварительно сохранив изменения.</p>
<p>Команд в <code class="docutils literal notranslate"><span class="pre">vim</span></code> огромное количество.
Выучить их все не только невозможно, но и бесмысленно.
Они осваиваются на практике по мере необходимости.
Здесь рассмотрим наиболее часто используемые команды.
Если вы спросите у водителя, где педаль тормоза (слева, в центре или справа), он не сразу ответит на вопрос.
Но в критической ситуации нога сама нажмет нужную педаль.
Похожая ситуация с редактором, владение которым доведено до автоматизма.
Команды забываются, но пальцы запоминают положение клавиш и сами тянутся к ним.</p>
</section>
<section id="id4">
<h2>Перемещение курсора<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>Курсор перемещается по тексту в нормальном режиме по командам.
В таблице ниже приведены стандартные клавиши перемещения курсора в остальных редакторах и соответствующие им команды <code class="docutils literal notranslate"><span class="pre">vim</span></code>.
Заметим, что клавиши управления курсором также работают в <code class="docutils literal notranslate"><span class="pre">vim</span></code>, но лучше ими не пользоваться.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Клавишы</p></th>
<th class="head"><p>Команды Vim</p></th>
<th class="head"><p>Перемещение</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">↓</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">j</span></code></p></td>
<td><p>на строку вниз</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">↑</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">k</span></code></p></td>
<td><p>на строку вверх</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">←</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td><p>на символ влево</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">→</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">h</span></code></p></td>
<td><p>на символ вправо</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PgUp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p>на экран вверх</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PgDn</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>на экран вниз</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">End</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">$</span></code></p></td>
<td><p>в конец текущей строки</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Home</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><p>в начало текущей строки (к первому непробельному символу)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Home</span></code>+<code class="docutils literal notranslate"><span class="pre">Home</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td><p>в начало текущей строки</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">Home</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">gg</span></code></p></td>
<td><p>в начало файла</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">End</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">G</span></code></p></td>
<td><p>в конце файла</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">→</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">w</span></code></p></td>
<td><p>на слово вправо</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">←</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>на слово влево</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">↑</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">y</span></code></p></td>
<td><p>экрана на строку вверх, курсор остается на месте</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">↓</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">e</span></code></p></td>
<td><p>экрана на строку вниз, курсор остается на месте</p></td>
</tr>
</tbody>
</table>
</div>
<p>Дополнительные команды перемещения:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">e</span></code>         перемещает курсор к последнему символу в слове.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">}</span></code>, <code class="docutils literal notranslate"><span class="pre">{</span></code>    перемещает курсор на абзац вниз, вверх.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">W</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>    перемещает курсор до пробела вперед, назад.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;number&gt;G</span></code> перемещает курсор на строку под номером <number>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z-</span></code>        делает текущую строку верхней на экране.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z.</span></code>        делает текущую строку средней на экране.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">z</span></code>+<code class="docutils literal notranslate"><span class="pre">Enter</span></code> делает текущую строку нижней на экране.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">H</span></code>         перемещает курсор на верхнюю строку.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M</span></code>         перемещает курсор на среднюю строку.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">L</span></code>         перемещает курсор на нижнюю строку.</p></li>
</ul>
<p>Перемещения курсора могут происходить посредством поиска:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f&lt;symbol&gt;</span></code> переходит к следующему символу <code class="docutils literal notranslate"><span class="pre">&lt;symbol&gt;</span></code> в текущей строке.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">F&lt;symbol&gt;</span></code> переходит к предыдущему символу <code class="docutils literal notranslate"><span class="pre">&lt;symbol&gt;</span></code> в текущей строке.</p></li>
</ul>
</section>
<section id="id5">
<h2>Редактирование текста<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<p>Рассмотрим команды, редактирующие текст:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">X</span></code> удаляет символ под курсором, перед курсором.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">J</span></code> сливает текущую строку со следующей.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> меняет регистр буквы на противоположный.</p></li>
</ul>
<p>Команда <code class="docutils literal notranslate"><span class="pre">d</span></code> совместно с командами перемещения удаляет текст.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dw</span></code> удаляет символы с текущего до конца слова и пробел тоже.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">de</span></code> похожа на <code class="docutils literal notranslate"><span class="pre">dw</span></code>, но пробел не удаляет.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dd</span></code> удаляет текущую строку.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d&lt;n&gt;d</span></code> удаляет <n> строк, начиная с текущей.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">diw</span></code> удаляет слово под курсором.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">db</span></code> удаляет символы от курсора до начала слова.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d$</span></code> удаляет от курсора до конца строки.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d^</span></code> удаляет от курсора до начала строки.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d0</span></code> удаляет от курсора до начала строки.</p></li>
<li><p>…</p></li>
</ul>
<p>Удаленный текст помещается в буфер и может быть добавлен оттуда по команде <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>Остальные команды, которые понадобятся:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">u</span></code> отмена изменений.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">U</span></code> отмена всех последних изменений в строке.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:redo</span></code>, <code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">r</span></code> повторяет последнюю отмененную команду.</p></li>
<li><p>‘.` повторяет последнюю команду.</p></li>
</ul>
<p>В <em>режиме вставки</em> <code class="docutils literal notranslate"><span class="pre">vim</span></code> превращается в обычный редактор, в котором набираемые символы появляются в файле.
Переход в него происходит по многим командам, которые отличаются тем, куда устанавливают курсор:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">i</span></code> добавляет символы за текущим символом.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">I</span></code> добавляет символы в начале строки.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> добавляет символы перед текущим символом.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">A</span></code> добавляет символы в конец строки.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code> добавляет пустую строку за текущей строкой и переходит на ее заполнение.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">O</span></code> добавляет пустую строку перед текущей строкой и переходит на ее заполнение.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cc</span></code> удаляет строку и переходит на добавление символов в начало строки.</p></li>
</ul>
<p>Переход из режима вставки в нормальный режим происходит по <code class="docutils literal notranslate"><span class="pre">Esc</span></code> или <code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">[</span></code>.</p>
<p>Для выделения текста используется визуальный режим.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">v</span></code> выделяет текст посимвольно;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">V</span></code> выделяет текст построчно;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ctrl</span></code>+<code class="docutils literal notranslate"><span class="pre">V</span></code> выделяет текст прямоугольником.</p></li>
</ul>
<p>Выделение начинается с исходного положения курсора.
К выделенному тексту можно применять вышеописанные команды редактирования.</p>
</section>
<section id="id6">
<h2>Вопросы для самоконтроля<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Запустите и закройте редактор <code class="docutils literal notranslate"><span class="pre">vim</span></code>.</p></li>
<li><p>В нижеследующем фрагменте кода замените строку “: invalid filename” на “: invalid blob”.
Не забудьте выровнять обратные косые черты по вертикали.</p></li>
</ol>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#define PARSE_BLOB(val, res)                                                  \</span>
<span class="cp">  do {                                                                        \</span>
<span class="cp">    if (!ParseFilename(val, res)) {                                           \</span>
<span class="cp">      cmSystemTools::Error(cmStrCat(&quot;-E cmake_module_compile_db failed to &quot;,  \</span>
<span class="cp">                                    &quot;parse &quot;, path, &quot;: invalid filename&quot;));   \</span>
<span class="cp">      return {};                                                              \</span>
<span class="cp">    }                                                                         \</span>
<span class="cp">  } while (0)</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>В нижеследующем коде измените положение фигурных скобок так, чтобы они расположились в отдельных строках.</p></li>
</ol>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">ParseFilename</span><span class="p">(</span><span class="n">Json</span><span class="o">::</span><span class="n">Value</span><span class="w"> </span><span class="k">const</span><span class="o">&amp;</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">result</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">val</span><span class="p">.</span><span class="n">isString</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">val</span><span class="p">.</span><span class="n">asString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./src"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="archive.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">9. </span>Архивирование файлов</p>
      </div>
    </a>
    <a class="right-next"
       href="jobs.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">11. </span>Управление заданиями</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Введение</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Начальные навыки</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Режимы и команды</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Перемещение курсора</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Редактирование текста</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Вопросы для самоконтроля</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Лазарев Владимир
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>